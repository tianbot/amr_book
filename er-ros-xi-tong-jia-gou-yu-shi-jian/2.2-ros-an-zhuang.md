# 2.2 ROS安装

#### 2.2.1 ROS版本介绍

通过上一小节的介绍，我们知道了什么是ROS，以及ROS的历史渊源，但是如果我们想要去运行ROS还得需要一个操作系统。ROS当前主要支持Ubuntu操作系统，当然还支持Debian、Arch Linux、Gentoo、OS X、OpenEmbedded/Yocto等操作系统。

据统计截止到2018年七月下载.deb文件的用户量（IP）达到327985位，较上年增长了41%。下载.deb功能包的次数达到16155301，较去年增长了20%。下载不同功能包名称的.deb文件达到11770，较上年增长了25%。下载不同版本功能包的的数量已经达到70481种，较上年增长32%。\[\[6]]

ROS各版本下载量介绍：

Hydro和更早的版本下载量占总下载量的0.17%，Indigo版本下载量占比为14.50%，Jade下载量占比为0.50%，Kinetic版本下载量占比为62.89%，Lunar版本下载量占比为2.70%，Melodic版本下载量占比为6.49%，独立于ROS的占比为11.22%（python-rosdistro、python-rosinstall以及第三方库，像pcl和colladadom）。\[5]

ROS Melodic版本是纪念ROS十二周年时发布的，ROS Kinetic版本是纪念ROS十周年发布的。ROS Melodic Morenia（18.04 LTS）版本发布于2018年5月份，支持日期终止到2023年5月份。ROS Kinetic Kame（16.04 LTS）版本发布于2016年5月份，支持日期终止到2021年4月份。我们可以看出每个ROS版本都与其所适配的Ubuntu版本同步。



#### ROS安装

截至成书的时间，大多数用户都会选择安装Kinetic（16.04 LTS）版本或者Melodic（18.04 LTS）版本。我们建议初学者在安装时查阅一下ROS官网的推荐版本。因为每个新版本ROS推出后，都会增加一些新的特性并且要与新版Ubuntu做适配，初期问题较多，因此不建议初学者在第一时间尝试新版本，这与我们平日里升级软件的习惯会略有不同。而且ROS发展到现在，基础性的功能差异并不大，以学习为目的的话，选择一个稳定的版本会更有优势。

刚刚接触ROS的新手对ROS没有直观的认识，会觉得安装ROS很复杂，不像Windows下安装软件那么简便。确实是这样。ROS实际是向系统中安装了框架和很多运行在此框架下的库和程序。我们可以将ROS类比成Steam一样的游戏平台，首先是安装承载游戏的大环境，然后可以根据需要下载不同的游戏，但是都要运行在这个平台中。

安装ROS首先需要Ubuntu系统。对于还没有接触过Ubuntu的新手，强烈建议大家选择英文版本的Ubuntu进行安装。这样当我们使用ROS时，得到的ROS的错误消息、编译警告等都是英文，是比较容易在搜索引擎上查找到对应的解决方案。使用中文版的时候，“段错误”、“核心已转储”这种提示比较难在中文搜索引擎中找到答案。有些用户觉得英文难以理解，实际上对于新手中文也一样不好理解。对于已经学习了多年英语的国内用户，多花一点时间熟悉Ubuntu和ROS的专业词汇，是要比看着中文错误提示进行Debug省时省力的。

对于安装ROS的具体步骤，大家可以浏览ROS Wiki\[\[7]]，本书中不再复述如何安装ROS。而且ROS安装的时候所需命令与版本相关性大，后面只简单对比一下几种常用安装方式优劣。

**使用虚拟机**

最好用的虚拟机应该就是大名鼎鼎的VMWare了，但是好用的版本都要付费而且价格不菲，而VirtualBox则是专业级的免费开源软件。在网上搜索下载VirtualBox，并安装Ubuntu和ROS，安装过程在此不做更多赘述，大家可自行搜索进行安装。

* 虚拟机安装Ubuntu优点
* 安装简单，没有硬件差异引起的问题
* 操作虚拟硬盘，不会破坏现有系统
* 虚拟机安装Ubuntu缺点
* 联网不稳定，由于Ubuntu和windows共用一个网络。
* 死机现象频发，多数主要是由于计算机性能较低，内存不足。
* **对显卡与外接设备的支持不好。**

图 2‑6 VirtualBox

**使用双系统**

因为研发移动机器人一定会接入很多外设，也常常需要运行对显卡要求较高的仿真环境。这样虚拟机安装ROS就不能胜任了。安装Windows+Ubuntu双系统是目前一种较优的选择。如果系统中原来没有其他操作系统的话就可以单独安装Ubuntu。安装双系统需要考虑两个系统的兼容性以及系统引导的问题，稍微有一些门槛。

* 双系统优点
* 相比虚拟机性能更优
* 外设兼容性更好
* 双系统缺点
* 安装时对windows系统的设置要求高，例如关闭windows自动更新、备份，时间同步等
* Ubuntu对显卡与网卡的驱动支持不完善
* 双系统安装Ubuntu时需要注意硬盘设备与分区，否则会造成灾难性后果

**使用ROS2GO**

ROS2GO是一款自带Ubuntu和ROS系统的高速固态闪存U盘，系统配置了初学者常用的功能包以及源码，适配大量硬件驱动，标准化了使用环境，可以从电脑的外部USB驱动器启动。本书中的例程以及源码都可以在ROS2GO的环境中顺利运行。

* ROS2GO优点
* 无需安装，直接启动
* 软件配置齐全，预装搜狗中文输入法、Vs Code编辑器、wps等
* 预装ROS常用功能包，完整的环境配置
* 对于电脑原操作系统无任何影响
* 非常便携，可以随时在不同电脑使用自己系统
* ROS2GO缺点
  * 高速闪存盘发热
  * 小文件读写速度影响大

关于更多ROS2GO的介绍请查看：[http://wiki.ros.org](http://wiki.ros.org/)/cn/ros2go

#### ROS安装完成

安装步骤在此不列出，还是推荐大家去Wiki查看安装过程，无论你选择哪种安装ROS的方式，当ROS安装完成之后，现在打开终端，首先要配置环境。如果是kinetic版本则输入

$ source /opt/ros/kinetic/setup.bash

之后新打开一个终端，输入roscore命令，如果出现如图 2‑7所示的命令，那么表示我们的ROS安装成功。

#### 如何操作Linux

如果是为了学ROS进而去学习Linux，在这一过程中需要了解大量Linux基础知识，推荐大家去读《鸟哥的Linux私房菜》，这本书也是面向非计算机专业的读者，会讲很多计算机硬件、操作系统以及Shell的基础知识。

图 2‑7 roscore启动成功后的界面

自此该小节重要学习点基本已讲述清楚，无外乎了解ROS版本，ROS安装、Linux操作。要想入门ROS可以寄托于参考书或者课程，但是要精通ROS就必须踏踏实实一步一个脚印，仔细阅读wiki.ros.org，有问题看answers.ros.org，软件说明查看docs.ros.org，相信大家的ROS水平将会得到大幅提升。
